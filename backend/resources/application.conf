# MnemoPhi Backend Configuration

# Application settings
app {
  name = "MnemoPhi"
  version = "1.0.0"
  environment = ${?ENVIRONMENT}
}

# Server configuration
server {
  host = "0.0.0.0"
  port = 8080
}

# Database configuration
database {
  host = ${?DB_HOST}
  port = ${?DB_PORT}
  name = ${?DB_NAME}
  username = ${?DB_USER}
  password = ${?DB_PASSWORD}
  url = "jdbc:postgresql://"${database.host}":"${database.port}"/"${database.name}
  
  # Connection pool settings
  hikari {
    maximumPoolSize = 10
    minimumIdle = 2
    connectionTimeout = 30000
    idleTimeout = 600000
    maxLifetime = 1800000
  }
}

# Redis configuration
redis {
  host = ${?REDIS_HOST}
  port = ${?REDIS_PORT}
  password = ${?REDIS_PASSWORD}
  database = 0
  timeout = 5000
  maxConnections = 10
}

# Security settings
security {
  jwt {
    secret = ${?JWT_SECRET}
    expiration = 86400 # 24 hours
  }
  api {
    keyHeader = "x-api-key"
  }
}

# Logging configuration
logging {
  level = "INFO"
  file = "logs/mnemophi.log"
}

# CORS settings
cors {
  allowedOrigins = ["http://localhost:3000", "http://localhost:3001", "http://dashboard.mnemophi.local", "http://user.mnemophi.local"]
  allowedMethods = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
  allowedHeaders = ["Content-Type", "Authorization", "x-api-key"]
  allowCredentials = true
}

# Rate limiting
rateLimit {
  enabled = true
  requestsPerMinute = 100
  burstCapacity = 200
}

# Compliance settings
compliance {
  auditLogging = true
  dataRetentionDays = 2555 # 7 years
  consentExpirationDays = 365 # 1 year
}